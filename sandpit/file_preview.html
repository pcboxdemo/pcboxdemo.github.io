<!doctype html>
<html lang="en">

<head>


	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<!-- polyfill.io only loads the polyfills your browser needs -->
	<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise"></script>
	<!-- Alternatively, use polyfills hosted on the Box CDN
     <script src="https://cdn01.boxcdn.net/polyfills/bluebird/3.5.1/bluebird.min.js"></script>
     -->

	<!-- Latest version of Box Content Preview for en-US locale -->
	<script src="https://cdn01.boxcdn.net/platform/elements/17.0.0/en-US/preview.js"></script>
	<link rel="stylesheet" href="https://cdn01.boxcdn.net/platform/elements/17.0.0/en-US/preview.css" />
	<script type="module" src="annotations.js"></script>
	 <link rel="stylesheet" href="annotations.css" />
	<script>
		var clientId = "bn2iyg37p78jkowrp0io0nc2ln0be3wt";



		$(document).ready(function() {
			//var userLogin = 'pchristensen+demo@boxdemo.com';
			var userLogin = 'pchristensen+sfdx3admin@boxdemo.com';

			var urlParams = "clientId=bn2iyg37p78jkowrp0io0nc2ln0be3wt&userEmail=" + userLogin +"&password=boxdemo12!";
			console.log(urlParams);
			var settings = {
				"async": true,
				"crossDomain": true,
				//"url": "https://bl2vhdoqzh.execute-api.eu-west-2.amazonaws.com/default/box-jwt-tokengenerator?" + urlParams,
				"url": "https://box-tokengenerator-v2.herokuapp.com/tokengenerator?" + urlParams,
				//"url": "http://localhost:7000/jwttokengenerator?" + urlParams,
				"method": "GET",
				"headers": {}
			};
			$.ajax(settings).done(function(response) {
				accessToken = response.userToken;
				var  contentSidebarProps= {
					hasActivityFeed: true,
					hasMetadata: true,
					hasVersions: true,
					features: {
						activityFeed: {
							annotations: {
								enabled: false
							},
							filter: {
								enabled: true
							},
							newThreadedReplies: {
								enabled: true
							}
						}
					},
					detailsSidebarProps: {
						hasAccessStats: true,
						hasContentInsights: true,
						hasClassification: true,
						hasNotices: true,
						hasProperties: true,
						hasRetentionPolicy: true,
						hasVersions: true,
						hasAdditionalTabs: true
					}
				}
			
				  
				  var options = {
					container: ".pcontainer",
					contentSidebarProps: contentSidebarProps,
				  
					
				  };
				  
				 
				  /* Box Preview */
				  var contentPreviewer = new Box.ContentPreview();
				  
				  /* Set annotation into previewer */
				  
				  contentPreviewer.show('1215561748929', accessToken, options);

			});

		});
		
	</script>
</head>

<body>
	This is a sample of preview and annotations
	<div class="tab-pane show active mts" role="tabpanel" id="explorer">

		<div style="height:800px;width:90vw;display:block" class="pcontainer"></div>
	</div>
</body>

</html>

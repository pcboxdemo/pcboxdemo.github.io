<!-- Connection Status Button -->
<button class="connection-status-btn" data-bs-toggle="modal" data-bs-target="#connectionModal" title="Connection Status">
    <i class="fas fa-plug" aria-hidden="true"></i>
</button>

<!-- Connection Status Modal -->
<div class="modal fade" id="connectionModal" tabindex="-1" role="dialog" aria-labelledby="connectionModalLabel" aria-hidden="true" style="display:none;">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="connectionModalLabel">
                    <span id="connectionStatusIcon">ðŸ”´</span>
                    <span id="connectionStatusText">Connection Status</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Current Session</h6>
                        <table class="table table-sm">
                            <tr>
                                <td><strong>Access Token:</strong></td>
                                <td id="sessionToken">None</td>
                            </tr>
                            <tr>
                                <td><strong>Refresh Token:</strong></td>
                                <td id="refreshToken">None</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h6>Stored Credentials</h6>
                        <table class="table table-sm">
                            <tr>
                                <td><strong>Token Hash:</strong></td>
                                <td id="tokenHash">None</td>
                            </tr>
                            <tr>
                                <td><strong>User Email:</strong></td>
                                <td id="userEmail">None</td>
                            </tr>
                            <tr>
                                <td><strong>Last Auth:</strong></td>
                                <td id="lastAuthTime">None</td>
                            </tr>
                            <tr>
                                <td><strong>Token Age:</strong></td>
                                <td id="tokenAge">N/A</td>
                            </tr>
                            <tr>
                                <td><strong>Expires In:</strong></td>
                                <td id="tokenExpiry">N/A</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="mt-3">
                    <h6>Status Legend</h6>
                    <ul class="list-unstyled">
                        <li><span class="status-connected">ðŸŸ¢ Connected</span> - Active session with valid tokens</li>
                        <li><span class="status-connected">ðŸŸ¡ Token Stored</span> - Valid stored token available</li>
                        <li><span class="status-expired">ðŸ”´ Token Expired</span> - Stored token older than 7 days</li>
                        <li><span class="status-none">ðŸ”´ Not Connected</span> - No authentication</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" onclick="logout()">Logout</button>
            </div>
        </div>
    </div>
</div>
